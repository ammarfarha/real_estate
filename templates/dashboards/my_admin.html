{% extends 'dashboards/base2.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% block page_header %}
<div class="row">
    <div class="col">
        <h3 class="my-3">My Projects List</h3>
    </div>
</div>
{% endblock page_header %}

{% block main_containt %}
<div class="row">
    <div class="col">
        <div class="dashboard-panel border bg-white rounded overflow-hidden w-100">
            <div class="overflow-x-scroll font-fifteen">
                <table class="w-100 items-list bg-transparent">
                    <thead>
                        <tr class="bg-white">
                            <th>Name</th>
                            <th>type</th>
                            <th>current status</th>
                            <th>area</th>
                            <th>Action</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for project in projects %}
                        <tr>
                            <td>
                                {% if project.has_image %}
                                <img class="rounded" src="/media/{{ project.get_first_image_or_default.image }}" alt="">
                                {% else %}
                                    <img class="rounded" src="{% static 'images/no_image.jpg' %}" alt="">
                                {% endif %}
                                <div class="property-info d-table">
                                    <h5 class="text-secondary font-400">{{ project.name }}</h5>
                                    <span><i class="fas fa-map-marker-alt text-primary font-13"></i> {{ project.location }}</span>
                                </div>
                            </td>
                            <td>{{ project.get_type_display }}</td>
                            <td>{{ project.get_statue_display }}</td>
                            <td>{{ project.area }}</td>
                            <td>
                                <a href="{% url 'main_app:project-update' project.pk %}" class="text-primary me-4 mb-1"><i class="fas fa-edit"></i></a>
                                <a href="{% url 'main_app:project-delete' project.pk %}" class="text-primary mb-1"><i class="fas fa-trash"></i></a>
                            </td>
                        </tr>
                    {% endfor %}
                    </tbody>
                </table>
            </div>
            <div class="dashboard-panel border bg-white rounded overflow-hidden w-100">
                <div class="col">
                    <a href="{% url 'main_app:add-project' %}" class="btn btn-outline-primary">Add New Project</a>
                </div>
            </div>
            <div class="col-lg-12 my-5">
                <nav aria-label="Page navigation example">
                    <ul class="pagination pagination-dotted-active justify-content-center">
                        <li class="page-item">
                            {% if page_obj.has_previous %}
                                <a href="?page={{ page_obj.previous_page_number }}" class="page-link">Previous Page</a>
                            {% endif %}
                        </li>
                        <li class="page-item active">
                            <a class="page-link" href="#">{{ page_obj.number }}</a>
                        </li>
                        <span>of</span>
                        <li class="page-item">
                            <a class="page-link" href="#">{{ page_obj.paginator.num_pages }}</a>
                        </li>
                        <li class="page-item">
                            {% if page_obj.has_next %}
                                <a class="page-link" href="?page={{ page_obj.next_page_number }}">Next Page</a>
                            {% endif %}
                        </li>
                    </ul>
                </nav>
            </div>
        </div>
    </div>
</div>
{% endblock main_containt %}
